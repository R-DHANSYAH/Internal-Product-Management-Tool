{% extends 'base.html' %}
{% block content %}
<h2>Add Product</h2>
<form method="POST" action="{{ url_for('add_product') }}">
    <label>Name:</label><br>
    <input type="text" name="name" required><br>
    <label>Price:</label><br>
    <input type="number" step="0.01" name="price" required><br>
    <label>Stock:</label><br>
    <input type="number" name="stock" required><br>
    <label>Category:</label><br>
    <select name="category" required>
        {% for cat in categories %}
        <option value="{{ cat.id }}">{{ cat.name }}</option>
        {% endfor %}
    </select><br>
    <button type="submit">Add Product</button>
</form>

<h3>Existing Products</h3>
<table>
<tr><th>Name</th><th>Price</th><th>Stock</th><th>Category</th><th>Actions</th></tr>
{% for prod in products.items %}
<tr>
<td>{{ prod.name }}</td>
<td>{{ prod.price }}</td>
<td>{{ prod.stock }}</td>
<td>{{ prod.category.name if prod.category else '' }}</td>
<td>
    <a class="btn btn-edit" href="{{ url_for('edit_product', id=prod.id) }}">Edit</a>
    <a class="btn btn-delete" href="{{ url_for('delete_product', id=prod.id) }}">Delete</a>
</td>
</tr>
{% else %}
<tr><td colspan="5">No products yet.</td></tr>
{% endfor %}
</table>

<div class="pagination">
{% for page_num in products.iter_pages() %}
    {% if page_num %}
        <a href="{{ url_for('products', page=page_num) }}">{{ page_num }}</a>
    {% else %}
        ...
    {% endif %}
{% endfor %}
</div>
{% endblock %}
